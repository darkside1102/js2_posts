function Blog(){this.comments=[],this.posts=[],this.titles=[]}function Post(t,o,s,e,n){this.id=t,this.userId=o,this.title=s,this.body=e,this.comments=n}Blog.prototype.fetchPosts=function(t){var o=this;$.ajax({url:"https://jsonplaceholder.typicode.com/posts",type:"GET"}).done(function(s){var e=[];s.forEach(function(t){e.push(t.title)}),o.titles=e,o.posts=s,t()})},Blog.prototype.fetchComments=function(t){$.ajax({url:"https://jsonplaceholder.typicode.com/comments",type:"GET",context:this}).done(function(o){this.comments=o,t()})},Blog.prototype.filterCommentsByPostId=function(t){var o=[];return this.comments.forEach(function(s){s.postId==t&&o.push(s)}),o},Blog.prototype.addPost=function(t,o){$.ajax({url:"https://jsonplaceholder.typicode.com/comments",type:"POST",context:this,data:{body:o,title:t}}).done(function(o){this.posts.push(o),this.titles.push(t),this.renderPosts()})},Blog.prototype.renderPostsByTitle=function(t){var o=[];this.posts.forEach(function(s){s.title==t&&o.push(s)}),this.renderPosts(o)},Blog.prototype.renderPosts=function(t){var o=this,s=t;s||(s=this.posts),$(".posts").html(""),$("<div/>",{class:"posts-inner"}).appendTo(".posts"),s.forEach(function(t){var s=o.filterCommentsByPostId(t.id),e=new Post(t.id,t.userId,t.title,t.body,s).render();$(".posts-inner").append(e)}),$(".posts-inner").accordion({collapsible:!0}),$(".search").autocomplete({source:this.titles})},Post.prototype.render=function(){var t="";return this.comments.forEach(function(o){t+='<p class="comment-item">'+o.body+"</p>"}),'<h3 class="post-title">'+this.title+'</h3>    <div class="post-content">      <p class="post-text">'+this.body+'</p>      <div class="comments-box">'+t+"</div>    </div>"};var blog=new Blog;blog.fetchPosts(function(){blog.fetchComments(function(){blog.renderPosts()})}),$(".add-post").on("click",function(){const t=$(".new-post-title").val(),o=$(".new-post-text").val();blog.addPost(t,o)}),$(".search-button").on("click",function(){const t=$(".search").val();t?blog.renderPostsByTitle(t):blog.renderPosts()});